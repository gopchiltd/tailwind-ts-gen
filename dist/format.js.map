{"version":3,"sources":["../src/format.ts"],"names":["formatCode","code","outputFilename","prettierConfig","prettier","require","error","log","print","warn","config","resolveConfig","format","parser","test"],"mappings":";;;;;;;AAEA;;;;;;AAFA;AAIO,eAAeA,UAAf,CACLC,IADK,EAELC,cAFK,EAGLC,cAHK,EAIL;AACA,MAAIC,QAAJ;;AAOA,MAAI;AACF;AACAA,IAAAA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAlB;AACD,GAHD,CAGE,OAAOC,KAAP,EAAc;AACd,QAAIH,cAAJ,EAAoB;AAClBI,MAAAA,GAAG,CAACC,KAAJ,CACED,GAAG,CAACE,IAAK,+FADX;AAGAF,MAAAA,GAAG,CAACC,KAAJ,CACED,GAAG,CAACE,IAAK,yDADX;AAGD;;AAED,WAAOR,IAAP;AACD;;AAED,QAAMS,MAAM,GAAG,MAAMN,QAAQ,CAAEO,aAAV,CACnBR,cAAc,IAAID,cADC,CAArB;AAGA,SAAOE,QAAQ,CAAEQ,MAAV,CAAiBX,IAAjB,EAAuB,EAC5B,GAAGS,MADyB;AAE5BG,IAAAA,MAAM,EAAE,SAASC,IAAT,CAAcZ,cAAd,IAAgC,YAAhC,GAA+C;AAF3B,GAAvB,CAAP;AAID","sourcesContent":["// eslint-disable-next-line import/no-extraneous-dependencies\nimport { format, resolveConfig } from 'prettier';\nimport * as log from 'cli-tag-logger';\n\nexport async function formatCode(\n  code: string,\n  outputFilename: string,\n  prettierConfig?: string\n) {\n  let prettier:\n    | {\n        format: typeof format;\n        resolveConfig: typeof resolveConfig;\n      }\n    | undefined;\n\n  try {\n    // eslint-disable-next-line import/no-extraneous-dependencies\n    prettier = require('prettier');\n  } catch (error) {\n    if (prettierConfig) {\n      log.print(\n        log.warn`--prettier-config options was specified, but prettier packages was not found in node_modules.`\n      );\n      log.print(\n        log.warn`Install prettier with npm/yarn in order to format code.`\n      );\n    }\n\n    return code;\n  }\n\n  const config = await prettier!.resolveConfig(\n    prettierConfig || outputFilename\n  );\n  return prettier!.format(code, {\n    ...config,\n    parser: /\\.tsx?/.test(outputFilename) ? 'typescript' : 'babel',\n  });\n}\n"],"file":"format.js"}