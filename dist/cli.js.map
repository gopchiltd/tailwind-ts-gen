{"version":3,"sources":["../src/cli.ts"],"names":["writeFileAsync","writeFile","argv","Yargs","scriptName","command","join","yargs","positional","description","type","option","alias","demandOption","help","process","on","error","log","print","exit","outputFilename","out","info","classnames","input","length","parsedClassnames","map","parseClassname","classnameExports","item","classname","code","dedent","success"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAEA,MAAMA,cAAc,GAAG,qBAAUC,aAAV,CAAvB;;AAEA,MAAMC,IAAI,GAAGC,eAAMC,UAAN,CAAiB,OAAjB,EACVC,OADU,CAET,eAFS,EAGT,CACE,8CADF,EAEE,0GAFF,EAGE,MAHF,EAIE,qIAJF,EAKEC,IALF,CAKO,GALP,CAHS,EASTC,KAAK,IAAI;AACPA,EAAAA,KAAK,CAACC,UAAN,CAAiB,OAAjB,EAA0B;AACxBC,IAAAA,WAAW,EAAE,+CADW;AAExBC,IAAAA,IAAI,EAAE;AAFkB,GAA1B;AAID,CAdQ,EAgBVC,MAhBU,CAgBH,KAhBG,EAgBI;AACbC,EAAAA,KAAK,EAAE,GADM;AAEbC,EAAAA,YAAY,EAAE,IAFD;AAGbJ,EAAAA,WAAW,EAAE,6CAHA;AAIbC,EAAAA,IAAI,EAAE;AAJO,CAhBJ,EAsBVC,MAtBU,CAsBH,gBAtBG,EAsBe;AACxBF,EAAAA,WAAW,EAAE,8BADW;AAExBC,EAAAA,IAAI,EAAE;AAFkB,CAtBf,EA0BVC,MA1BU,CA0BH,iBA1BG,EA0BgB;AACzBF,EAAAA,WAAW,EAAE,+BADY;AAEzBC,EAAAA,IAAI,EAAE;AAFmB,CA1BhB,EA8BVI,IA9BU,GA8BHZ,IA9BV;;AAgCAa,OAAO,CAACC,EAAR,CAAW,mBAAX,EAAgCC,KAAK,IAAI;AACvCC,EAAAA,GAAG,CAACC,KAAJ,CAAUD,GAAG,CAACD,KAAM,mBAAkBA,KAAM,EAA5C;AACAF,EAAAA,OAAO,CAACK,IAAR,CAAa,CAAb;AACD,CAHD;;AAKA,CAAC,YAAY;AACX,MAAI;AACF,UAAMC,cAAc,GAAG,sBAAWnB,IAAI,CAACoB,GAAhB,IAAuBpB,IAAI,CAACoB,GAA5B,GAAkC,mBAAQpB,IAAI,CAACoB,GAAb,CAAzD;AACAJ,IAAAA,GAAG,CAACC,KAAJ,CAAUD,GAAG,CAACK,IAAK,2BAA0BF,cAAe,EAA5D;AAEA,UAAMG,UAAU,GAAG,MAAM,gCACvBtB,IAAI,CAACuB,KADkB,EAEvBvB,IAAI,CAAC,gBAAD,CAFmB,CAAzB;AAKAgB,IAAAA,GAAG,CAACC,KAAJ,CAAUD,GAAG,CAACK,IAAK,SAAQC,UAAU,CAACE,MAAO,cAA7C;AACAR,IAAAA,GAAG,CAACC,KAAJ,CAAUD,GAAG,CAACK,IAAK,YAAnB;AACA,UAAMI,gBAAgB,GAAGH,UAAU,CAACI,GAAX,CAAeC,qBAAf,CAAzB;AACA,UAAMC,gBAAgB,GAAI,iCAAgCH,gBAAgB,CAACC,GAAjB,CACxDG,IAAI,IAAK,IAAGA,IAAI,CAACC,SAAU,GAD6B,CAExD,GAFF;AAIAd,IAAAA,GAAG,CAACC,KAAJ,CAAUD,GAAG,CAACK,IAAK,eAAnB;AAEA,QAAIU,IAAI,GAAGC,eAAO;;;;;;;MAOhBJ,gBAAiB;KAPnB;AASAG,IAAAA,IAAI,GAAG,MAAM,wBAAWA,IAAX,EAAiBZ,cAAjB,EAAiCnB,IAAI,CAAC,iBAAD,CAArC,CAAb;AAEAF,IAAAA,cAAc,CAACqB,cAAD,EAAiBY,IAAjB,CAAd;AACAf,IAAAA,GAAG,CAACC,KAAJ,CAAUD,GAAG,CAACiB,OAAQ,OAAtB;AACD,GA/BD,CA+BE,OAAOlB,KAAP,EAAc;AACdC,IAAAA,GAAG,CAACC,KAAJ,CAAUD,GAAG,CAACD,KAAM,mBAAkBA,KAAM,EAA5C;AACAF,IAAAA,OAAO,CAACK,IAAR,CAAa,CAAb;AACD;AACF,CApCD","sourcesContent":["import Yargs from 'yargs';\nimport dedent from 'dedent';\nimport { extractClassnames } from './extract';\nimport { parseClassname } from './parse';\nimport { formatCode } from './format';\nimport { isAbsolute, resolve } from 'path';\nimport { promisify } from 'util';\nimport { writeFile } from 'fs';\nimport * as log from 'cli-tag-logger';\n\nconst writeFileAsync = promisify(writeFile);\n\nconst argv = Yargs.scriptName('tw2ts')\n  .command(\n    '$0 <input...>',\n    [\n      'Generate file with Tailwind CSS class names.',\n      'If Prettier config file and Prettier package is available, it will be used to format the generated file.',\n      '\\n\\n',\n      'You can pass multiple input files - class names from all of them, will be extracted to a single file specified by -o, --out option.',\n    ].join(' '),\n    yargs => {\n      yargs.positional('input', {\n        description: 'CSS/SASS/LESS file with Tailwind CSS imports.',\n        type: 'string',\n      });\n    }\n  )\n  .option('out', {\n    alias: 'o',\n    demandOption: true,\n    description: 'Path to an output file with generated code.',\n    type: 'string',\n  })\n  .option('postcss-config', {\n    description: 'Path to PostCSS config file.',\n    type: 'string',\n  })\n  .option('prettier-config', {\n    description: 'Path to Prettier config file.',\n    type: 'string',\n  })\n  .help().argv;\n\nprocess.on('uncaughtException', error => {\n  log.print(log.error`Unhandled error ${error}`);\n  process.exit(1);\n});\n\n(async () => {\n  try {\n    const outputFilename = isAbsolute(argv.out) ? argv.out : resolve(argv.out);\n    log.print(log.info`Resolved output file to ${outputFilename}`);\n\n    const classnames = await extractClassnames(\n      argv.input as string[],\n      argv['postcss-config']\n    );\n\n    log.print(log.info`Found ${classnames.length} class names`);\n    log.print(log.info`Parsing...`);\n    const parsedClassnames = classnames.map(parseClassname);\n    const classnameExports = `export default _classNames = [${parsedClassnames.map(\n      item => `\"${item.classname}\"`\n    )}]`;\n\n    log.print(log.info`Generating...`);\n\n    let code = dedent`\n    /**\n     * @file Tailwind CSS class names exported as const variables.\n     *       Auto-generated file. Do not modify.\n     * @author tailwind-ts-gen\n     */\n\n    ${classnameExports}\n    `;\n    code = await formatCode(code, outputFilename, argv['prettier-config']);\n\n    writeFileAsync(outputFilename, code);\n    log.print(log.success`Done!`);\n  } catch (error) {\n    log.print(log.error`Unhandled error ${error}`);\n    process.exit(1);\n  }\n})();\n"],"file":"cli.js"}